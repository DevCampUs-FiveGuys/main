<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">
<head>
    <link rel="stylesheet" th:href="@{/css/portfolio.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script>
        // Function to toggle favorite (like) status
        function toggleFavorite(button) {
            button.classList.toggle('active'); // Toggle active class for styling
            const icon = button.querySelector('i');
            const likeText = button.querySelector('.like-text');

            if (button.classList.contains('active')) {
                icon.classList.remove('far');
                icon.classList.add('fas'); // Change to filled heart icon
                likeText.textContent = '찜함'; // Change text to '찜함'
                // TODO: Save like state to local storage or send to server
            } else {
                icon.classList.remove('fas');
                icon.classList.add('far'); // Change to empty heart icon
                likeText.textContent = '찜'; // Change text to '찜'
                // TODO: Remove like state from local storage or send to server
            }
        }
    </script>
</head>
<div layout:fragment="content">
    <div th:with="stpath='https://kr.object.ncloudstorage.com/bitcamp-bucket-149/semiproject'">
        <h1 class="portfolio_h1">PortFolio</h1>
        <div class="filters1">
            <button class="animate-button" th:onclick="|location.href='@{/portfolio/portfolioWrite}'|">
                <i class="fas fa-pencil-alt"></i>글쓰기
            </button>
        </div>

        <div class="course1-list">
            <tr th:each="dto : ${list}">
                <div class="course1" style="border: 1px solid">
                    <img class="stpathimg" th:src="@{${stpath}+'/'+${dto.file_name}}"
                         th:onclick="|location.href='@{/portfolio/Detail(portfolio_id=${dto.portfolio_id})}'|">
                    <span class="readcount1" th:text="${dto.readcount}"></span>
                    <div>
                        <span class="title1" th:text="${dto.title}"></span>
                    </div>
                    <span th:text="${dto.name}"></span>
                    <span th:text="${#dates.format(dto.created_at, 'yyyy.MM.dd')}" />
                    <button class="look" th:onclick="|location.href='@{/portfolio/Detail(portfolio_id=${dto.portfolio_id})}'|">자세히보기 +</button>
                    <button type="button" class="favorite-button" onclick="toggleFavorite(this)">
                        <i class="far fa-heart"></i>
                    </button>
                </div>
            </tr>
        </div>
    </div>
    <div class="pfpage" style="width: 600px; text-align: center; font-size: 20px;">
        <span th:if="${startPage != null and startPage > 1}">
            <a th:href="@{/portfolio/list(currentPage=${startPage - 1})}" style="text-decoration: none; color: black;">&lt;</a>
        </span>
        &nbsp;
        <span th:each="pp : ${#numbers.sequence(startPage != null ? startPage : 1, endPage != null ? endPage : 5)}">
            <a th:href="@{/portfolio/list(currentPage=${pp})}" th:style="'text-decoration: none; color:' + (${currentPage} == ${pp} ? 'red' : 'black')"
               th:text="${pp}"></a>&nbsp;
        </span>
        &nbsp;
        <span th:if="${endPage != null and endPage < totalPage}">
            <a th:href="@{/portfolio/list(currentPage=${endPage + 1})}" style="text-decoration: none; color: black;">&gt;</a>
        </span>
    </div>
</div>
</html>